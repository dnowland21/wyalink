<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Insight (No-Build Demo)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React + ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel to compile JSX in-browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      html,body { background:#eef2f5; }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const {useState,useEffect,useMemo,useRef} = React;

      const BRAND = { primary:"#00254a", accent:"#36b1b3" };
      const DASHBOARD_BG = "https://susquehannagreenway.org/wp-content/uploads/2023/12/30357595264_923137108c_k.jpg";
      const PLAN_DEFS = [
        { name:"Breeze", price:25, talk:"Unlimited", text:"Unlimited", data:5 },
        { name:"Stream", price:35, talk:"Unlimited", text:"Unlimited", data:15 },
        { name:"Ridge", price:45, talk:"Unlimited", text:"Unlimited", data:30 },
        { name:"Liberty", price:60, talk:"Unlimited", text:"Unlimited", data:50 },
      ];
      
	const norm = (s)=> (s ?? "").toString().toLowerCase();
	const includesQ = (hay, q)=> norm(hay).includes(norm(q));

	const CARRIERS = [
	  { 
		name: "AirVoice",
		account: "SIM card number",
		pin: "Last 4 digits of phone number",
		support: "888-944-2355",
		tips: null
	  },
	  { 
		name: "AT&T (Postpaid)",
		account: "9- or 12-digit wireless account number (not the phone number)",
		pin: "6-digit Number Transfer PIN (*PORT, myAT&T app, or online)",
		support: "888-898-7685 (Port Center)",
		tips: "Find account at myAT&T: Profile > Sign-in Info > My linked accounts. If bundled with wireline/Internet/DIRECTV, the wireless account is separate."
	  },
	  { 
		name: "AT&T (Prepaid)",
		account: "2-digit account number",
		pin: "4-digit number",
		support: "800-901-9878 (Member Service)",
		tips: "Prepaid and Postpaid have separate account numbers."
	  },
	  { 
		name: "Bandwidth",
		account: "Contact Bandwidth",
		pin: "Contact Bandwidth",
		support: "852-581-8800 or 855-864-7776",
		tips: null
	  },
	  { 
		name: "Boost / Dish Wireless",
		account: "9-digit account number (not the phone number)",
		pin: "4-digit number",
		support: "833-502-6678",
		tips: null
	  },
	  { 
		name: "Cellcom",
		account: "Listed on invoice",
		pin: "Contact member service",
		support: "800-236-0055 (Port Center)",
		tips: "Prepaid accounts use a centralized ZIP; contact member service."
	  },
	  { 
		name: "Consumer Cellular",
		account: "Typically starts with 1000; upper-right of bill/online account (not the phone number)",
		pin: "6-digit alphanumeric; sent to each device and tied to that number",
		support: "888-750-5519",
		tips: "You may be asked for account owner name, last 4 of SSN, and billing address."
	  },
	  { 
		name: "Credo Mobile",
		account: "Member Number (text “ACCOUNT” to 27336)",
		pin: "—",
		support: "866-952-5017 (Port Center)",
		tips: "Have billing address and account owner’s full name."
	  },
	  { 
		name: "Cricket",
		account: "9-digit account number (not the phone number)",
		pin: "4-digit Authorization ID (AID)",
		support: "800-274-2538 (Port Center)",
		tips: "Reset AID: call 855-246-2461, enter “1111” 3×, press # to get one-time PIN by text, then set new PIN."
	  },
	  { 
		name: "C-Spire / Cellular South",
		account: "Not the phone number",
		pin: "Contact C-Spire",
		support: "855-277-4735",
		tips: "Billing ZIP may be requested."
	  },
	  { 
		name: "EasyGo",
		account: "Contact EasyGo",
		pin: "Contact EasyGo",
		support: "888-210-0757",
		tips: null
	  },
	  { 
		name: "Frontier",
		account: "17-digit number beginning with 10-digit phone number (top of bill or online)",
		pin: "Contact Frontier",
		support: "800-921-8101",
		tips: null
	  },
	  { 
		name: "Google Fi (Project Fi)",
		account: "5-digit account number (Manage plan > Leave Google Fi)",
		pin: "5-digit PIN (same flow as account number)",
		support: "844-825-5234 (Port Center) or in-app/chat",
		tips: null
	  },
	  { 
		name: "Google Voice",
		account: "10-digit Google Voice number",
		pin: "Google Voice voicemail PIN",
		support: "google.com/voice/unlock (web)",
		tips: "Porting may take 5–7 days. Native GV numbers require an unlock fee; numbers previously ported into GV do not."
	  },
	  { 
		name: "GoSmart Mobile",
		account: "10-digit GoSmart phone number",
		pin: "Account PIN (set via 611: Manage my account > Change my account PIN)",
		support: "877-582-7788",
		tips: null
	  },
	  { 
		name: "H2O Wireless",
		account: "8-digit account number",
		pin: "4-digit number (default is last 4 of SIM)",
		support: "800-562-3229",
		tips: null
	  },
	  { 
		name: "Hello Mobile",
		account: "Shown mid/upper-right in online account",
		pin: "4-digit number (default last 4 of phone number)",
		support: "888-954-3556",
		tips: null
	  },
	  { 
		name: "Kroger Wireless",
		account: "10-digit Kroger Wireless phone number",
		pin: "Set at activation",
		support: "866-434-7796",
		tips: null
	  },
	  { 
		name: "Line2",
		account: "Submit request at support.line2.com (Port Out request)",
		pin: "Contact Line2",
		support: "888-472-9900",
		tips: "Request form: https://support.line2.com/hc/en-us/requests/new"
	  },
	  { 
		name: "Lively",
		account: "Found in Lively online account",
		pin: "Contact Lively",
		support: "800-733-6632 (option 3)",
		tips: null
	  },
	  { 
		name: "Lumen",
		account: "13–15 digits",
		pin: "Contact Lumen",
		support: "800-871-9244 (option 3)",
		tips: null
	  },
	  { 
		name: "Lycamobile",
		account: "Provided by text after verification with member service",
		pin: "Created automatically and sent during setup",
		support: "866-277-3221 (option 1 > option 5)",
		tips: null
	  },
	  { 
		name: "magicJack",
		account: "Found in online account",
		pin: "magicJack online account password",
		support: "844-866-2442",
		tips: null
	  },
	  { 
		name: "Metro",
		account: "9-digit account number (from payment confirmation texts)",
		pin: "8-digit number (remove 4-digit high-security PIN if present, then set 8-digit)",
		support: "888-863-8768 (Port Center)",
		tips: null
	  },
	  { 
		name: "Mint Mobile",
		account: "12-digit account number",
		pin: "4-digit number (default last 4 of phone number)",
		support: "800-683-7392",
		tips: null
	  },
	  { 
		name: "NumberBarn",
		account: "Numbers > select number > Port Out (in account)",
		pin: "Contact NumberBarn",
		support: "help.numberbarn.com (online)",
		tips: "Support request: https://help.numberbarn.com/hc/en-us/requests/new"
	  },
	  { 
		name: "Ooma",
		account: "Contact Ooma",
		pin: "Contact Ooma",
		support: "888-711-6662",
		tips: null
	  },
	  { 
		name: "Optimum Mobile",
		account: "Contact Optimum",
		pin: "Contact Optimum",
		support: "866-200-7186 or 611 from Optimum phone",
		tips: null
	  },
	  { 
		name: "Page Plus",
		account: "Device serial (IMEI/MEID)",
		pin: "Default last 4 of phone number unless changed",
		support: "800-550-2436",
		tips: null
	  },
	  { 
		name: "Puretalk",
		account: "Typically starts with 2111",
		pin: "Set at activation",
		support: "877-820-7873",
		tips: "You may be asked for account owner name, last 4 of SSN, and billing address."
	  },
	  { 
		name: "Q Link",
		account: "Enrollment number (in online account)",
		pin: "Default last 4 of SSN",
		support: "855-754-6543 (Port Center)",
		tips: "Billing ZIP may be requested."
	  },
	  { 
		name: "Ready Wireless",
		account: "8-digit number (typically starts with 16)",
		pin: "4-digit number (default 0000 unless changed)",
		support: "319-294-6080",
		tips: null
	  },
	  { 
		name: "Red Pocket Mobile",
		account: "Contact Red Pocket",
		pin: "4-digit number",
		support: "888-993-3888 or 712-775-8777",
		tips: null
	  },
	  { 
		name: "Selectel",
		account: "Contact Selectel",
		pin: "Last 4 of phone number unless changed",
		support: "877-218-5744",
		tips: "You may be asked for account owner name and billing address."
	  },
	  { 
		name: "Simple Mobile",
		account: "Last 15 digits of SIM (BYOD) or IMEI (15/18 digits) if purchased from Straight Talk/Tracfone",
		pin: "4–5 digit number (set if not already on account)",
		support: "877-878-7908 or text “Help” to 611611",
		tips: "If the device was upgraded, contact support for the correct IMEI. Billing ZIP may be requested."
	  },
	  { 
		name: "Spectrum / Charter (Landline/Business)",
		account: "Found on Spectrum bill",
		pin: "Port-Out PIN requested from Spectrum",
		support: "833-224-6603 (Port Center)",
		tips: "Provide exact Business Name, Authorized Signer’s Name, and Full Service Address where the phone rings."
	  },
	  { 
		name: "Spectrum Mobile / Charter",
		account: "Found on Spectrum Mobile bill",
		pin: "Port-Out PIN requested from Spectrum (Security Code on bill)",
		support: "833-224-6603 (Port Center)",
		tips: "Use only for Spectrum Mobile lines. Billing ZIP may be required."
	  },
	  { 
		name: "Straight Talk / Tracfone / Net10 / Safelink Wireless / Total Wireless",
		account: "AT&T/Sprint/T-Mobile: last 15 of SIM (BYOD) or IMEI if purchased; Verizon: IMEI or full 20-digit SIM",
		pin: "4–5 digit number (set if not already on account)",
		support: "800-327-2077 or text “Help” to 611611",
		tips: "These are resellers for Verizon/AT&T/T-Mobile (and legacy Sprint). If device was upgraded, contact support for correct IMEI. Billing ZIP may be requested."
	  },
	  { 
		name: "Telispire",
		account: "8-digit number starting with 12, 13, or 14",
		pin: "Contact Telispire",
		support: "940-397-9600",
		tips: "Have account owner name and billing address."
	  },
	  { 
		name: "Tello",
		account: "Tello account > My Phone > Port Out section",
		pin: "4-digit security PIN (set at signup or reset: My Information > Change)",
		support: "866-377-0294",
		tips: null
	  },
	  { 
		name: "TextNow",
		account: "Phone number with leading ‘1’",
		pin: "4-digit number",
		support: "porting@textnow.com",
		tips: "Use billing address as needed."
	  },
	  { 
		name: "Ting",
		account: "10-digit (PIN/ACCESS CODE starting with RA) or see Account Settings > Port Out Information",
		pin: "MSL code (see device settings for the line)",
		support: "855-846-4389",
		tips: null
	  },
	  { 
		name: "T-Mobile (Postpaid)",
		account: "9-digit account number (online account)",
		pin: "6-digit Number Transfer PIN (MyT-Mobile or dial 611/800-937-8997)",
		support: "800-937-8997 (Port Center)",
		tips: "Disable Number Lock in security settings if enabled."
	  },
	  { 
		name: "T-Mobile (Prepaid)",
		account: "9-digit account number (online account or support)",
		pin: "4-digit number",
		support: "877-778-2106 (Port Center)",
		tips: null
	  },
	  { 
		name: "Ultra Mobile",
		account: "12-digit number (provided by text after selecting option 5 at support)",
		pin: "Default last 4 of phone number unless changed",
		support: "888-777-0446 (option 5)",
		tips: null
	  },
	  { 
		name: "Union Wireless",
		account: "Contact Union Wireless",
		pin: "Contact Union Wireless",
		support: "888-926-2273 (Port Center)",
		tips: "You may be asked for account owner name, last 4 of SSN, and billing address."
	  },
	  { 
		name: "UNREAL Mobile",
		account: "my.unrealmobile.com > Settings > Port Out Info",
		pin: "Same as above (Port Out Info page)",
		support: "310-807-6388",
		tips: null
	  },
	  { 
		name: "US Cellular",
		account: "9-digit member ID",
		pin: "4-digit number",
		support: "888-944-9400 (Port Center)",
		tips: null
	  },
	  { 
		name: "US Mobile",
		account: "Contact US Mobile",
		pin: "Contact US Mobile",
		support: "878-205-0088",
		tips: null
	  },
	  { 
		name: "Verizon (Postpaid)",
		account: "9-digit account number (MyVerizon; not the MDN)",
		pin: "6-digit Number Transfer PIN (MyVerizon > Number Transfer PIN > Generate or dial #PORT)",
		support: "Verizon Care",
		tips: null
	  },
	  { 
		name: "Verizon Business",
		account: "Shown on bill",
		pin: "4-digit Number Transfer/Port-Out PIN (same as account PIN)",
		support: "888-844-7095 (Porting Dept.)",
		tips: "Billing ZIP may be required."
	  },
	  { 
		name: "Verizon Prepaid",
		account: "Shown on bill/online account",
		pin: "6-digit Number Transfer PIN (MyVerizon > Number Transfer PIN > Generate or dial #PORT)",
		support: "Verizon Care",
		tips: "Billing ZIP may be required."
	  },
	  { 
		name: "Visible",
		account: "Shown in account",
		pin: "6-digit Number Transfer PIN (request via app: Account > Port-Out PIN; delivered by email)",
		support: "Verizon Care",
		tips: "PIN valid 7 days. Max 3 PINs per 24 hours. Requesting a new PIN invalidates prior ones. Email PIN can take up to 60 minutes. You can invalidate the latest PIN via the link in email/SMS."
	  },
	  { 
		name: "Vonage",
		account: "Upper-right of bill or online account",
		pin: "Number used to verify account",
		support: "732-944-0000",
		tips: null
	  },
	  { 
		name: "Walmart Family Mobile",
		account: "Device IMEI/ESN (dial #225 to obtain)",
		pin: "—",
		support: "877-440-9758 or 800-327-2077 (TracFone Port Center)",
		tips: "Billing ZIP or store ZIP where service was set up may be requested."
	  },
	  { 
		name: "Wing",
		account: "Contact Wing",
		pin: "Contact Wing",
		support: "818-722-1441",
		tips: null
	  },
	  { 
		name: "Xfinity / Comcast (Landline/Business)",
		account: "Found on Xfinity bill",
		pin: "Port-Out PIN from Xfinity",
		support: "Contact Xfinity",
		tips: "Provide exact Business Name, Authorized Signer’s Name, and Full Service Address where the phone rings."
	  },
	  { 
		name: "Xfinity Mobile / Comcast",
		account: "10-digit number (usually starts with 100; on the bill)",
		pin: "Request via account: Devices > select number > Transfer your number (PIN by text)",
		support: "888-936-4968",
		tips: "Use only for Xfinity Mobile lines. Billing ZIP may be required."
	  }
	];

      
      const DEFAULT_ARTICLES = [
        { title:"WyaLink 5 Promises", url:"#", tag:"Onboarding", desc:"Internal quality and service commitments overview." },
        { title:"Device Return Policy", url:"#", tag:"Policy", desc:"Key terms, RMA steps, restocking fees, and timelines." },
        { title:"CBRS Node Bring-Up Checklist", url:"#", tag:"Network", desc:"Site survey, spectrum scan, provisioning, and acceptance tests." },
      ];
      const DEFAULT_CONTACTS = [
        { label:"Customer Support", phone:"1-800-555-1234" },
        { label:"Tech Support", phone:"1-800-555-5678" },
        { label:"Billing", phone:"1-800-555-9012" },
        { label:"Sales", phone:"1-800-555-3456" },
        { label:"Kyle (Direct)", phone:"1-800-338-5486" },
      ];

      // Simple inline SVG icons (flat, no glow)
      function Icon({name, size=22}) {
        const stroke = BRAND.accent;
        const props = { width:size, height:size, viewBox:"0 0 24 24", fill:"none", stroke, strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round" };
        switch(name){
          case "home": return (<svg {...props}><path d="M3 10.5 12 3l9 7.5"/><path d="M5 10v10h14V10"/></svg>);
          case "file": return (<svg {...props}><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12V8z"/><path d="M14 2v6h6"/></svg>);
          case "layers": return (<svg {...props}><path d="m12 2 9 5-9 5-9-5 9-5z"/><path d="m3 12 9 5 9-5"/></svg>);
          case "phone-in": return (<svg {...props}><path d="M22 2v6h-6"/><path d="M22 8 16 2"/><path d="M22 16.92a4.65 4.65 0 0 1-5 4.58 19.86 19.86 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.86 19.86 0 0 1-.5 3 4.65 4.65 0 0 1 4.08-2h0"/></svg>);
          case "book": return (<svg {...props}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M20 22H6.5A2.5 2.5 0 0 1 4 19.5V4.5A2.5 2.5 0 0 1 6.5 2H20z"/></svg>);
          case "phone": return (<svg {...props}><path d="M22 16.92a4.65 4.65 0 0 1-5 4.58c-7.5 0-13.5-6-13.5-13.5a4.65 4.65 0 0 1 4.58-5H9l2 5-3 2a12.15 12.15 0 0 0 7 7l2-3 5 2z"/></svg>);
          case "settings": return (<svg {...props}><path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 1 1 3.21 17l.06-.06A1.65 1.65 0 0 0 3.6 15a1.65 1.65 0 0 0-1.51-1H2a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 1 1 5.04 3.21l.06.06a1.65 1.65 0 0 0 1.82.33H7a1.65 1.65 0 0 0 1-1.51V2a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06A2 2 0 1 1 20.79 5l-.06.06a1.65 1.65 0 0 0-.33 1.82V7c0 .66.38 1.26 1 1.51H21a2 2 0 1 1 0 4h-.09c-.62.25-1 .85-1 1.49Z"/></svg>);
          case "search": return (<svg {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>);
          case "trash": return (<svg {...props}><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/><path d="M10 11v6M14 11v6"/><path d="M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"/></svg>);
          case "download": return (<svg {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><path d="M7 10l5 5 5-5"/><path d="M12 15V3"/></svg>);
          case "upload": return (<svg {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><path d="M7 10l5-5 5 5"/><path d="M12 5v12"/></svg>);
          case "tag": return (<svg {...props}><path d="M20.59 13.41 12 22l-8-8 8-8 8.59 8.41z"/><circle cx="7.5" cy="14.5" r="1.5"/></svg>);
          default: return (<svg {...props}><circle cx="12" cy="12" r="9"/></svg>);
        }
      }

      function useLocalStorage(key, initialValue){
        const [value, setValue] = useState(() => {
          try { const v = localStorage.getItem(key); return v ? JSON.parse(v) : initialValue; } catch { return initialValue; }
        });
        useEffect(() => { try { localStorage.setItem(key, JSON.stringify(value)); } catch {} }, [key, value]);
        return [value, setValue];
      }
      function useGreeting(name){
        const [now,setNow] = useState(new Date());
        useEffect(()=>{ const t=setInterval(()=>setNow(new Date()),60000); return ()=>clearInterval(t); },[]);
        const h = now.getHours();
        return (h<12?"Good morning":h<18?"Good afternoon":"Good evening") + ", " + name;
      }

	function App(){
	  const [tab,setTab] = useState("dashboard");
	  const [query, setQuery] = useState("");          // ← NEW

	  // optional, clears search when switching tabs
	  useEffect(()=>{ setQuery(""); }, [tab]);         // ← NEW

	  return (
		<div className="min-h-screen text-slate-900 bg-gradient-to-br from-slate-100 to-slate-200">
		  <div className="mx-auto grid max-w-[1200px] grid-cols-[80px_1fr] gap-6 px-4 pb-16 pt-6">
			<Sidebar active={tab} onNav={setTab} />
			<div>
			  <Header query={query} setQuery={setQuery} />   {/* ← add props */}
			  <main className="mt-4">
				{tab==="dashboard" && <Dashboard onNav={setTab} />}
				{tab==="quote" && <QuoteTool query={query} />}         
				{tab==="plans" && <Plans query={query} />}              
				{tab==="porting" && <PortingGuide query={query} />}     
				{tab==="articles" && <Articles query={query} />}        
				{tab==="contacts" && <Contacts query={query} />}        
				{tab==="settings" && <SettingsPanel />}
				{tab==="promos" && <Promotions query={query} />}
			  </main>
			  <Footer />
			</div>
		  </div>
		</div>
	  );
	}


	function Header({query, setQuery}){
	  const greet = useGreeting("Kyle");
	  const inputRef = useRef(null);

	  // Press "/" to focus search
	  useEffect(()=>{
		const h = (e)=>{ 
		  if (e.key === "/" && !e.metaKey && !e.ctrlKey && !e.altKey) {
			e.preventDefault();
			inputRef.current?.focus();
		  }
		};
		window.addEventListener("keydown", h);
		return ()=>window.removeEventListener("keydown", h);
	  },[]);

	  return (
		<div className="relative">
		  <div
			className="rounded-3xl border border-white/30 bg-white/50 px-5 py-3 shadow-lg backdrop-blur supports-[backdrop-filter]:bg-white/30"
			style={{isolation:'isolate'}}
		  >
			{/* 3 columns: logo | centered search | greeting */}
			<div className="grid grid-cols-[auto,1fr,auto] items-center gap-3">
			  
			  {/* LEFT: Your logo */}
			  <div className="flex items-center gap-2">
				<img
				  src="Subheading.png"        // ← put your file name here
				  alt="Insight"
				  className="h-8 md:h-10 w-auto object-contain"
				  draggable="false"
				  decoding="async"
				/>
			  </div>

			  {/* CENTER: Search (stays perfectly centered) */}
			  <div className="justify-self-center w-full flex justify-center">
				<div className="flex w-full max-w-lg items-center gap-2 rounded-full border border-white/40 bg-white/60 px-3 py-2 text-sm shadow-inner backdrop-blur">
				  <Icon name="search" size={16} />
				  <input
					ref={inputRef}
					value={query}
					onChange={e=>setQuery(e.target.value)}
					className="w-full bg-transparent outline-none placeholder:text-slate-500"
					placeholder="Search… (press / to focus)"
				  />
				  {query && (
					<button onClick={()=>setQuery("")} className="rounded-full p-1 text-slate-500 hover:text-slate-700" aria-label="Clear search">
					  ×
					</button>
				  )}
				</div>
			  </div>

			  {/* RIGHT: Greeting (or actions) */}
			  <div className="text-sm font-medium text-slate-700 justify-self-end">
				{greet}
			  </div>
			</div>
		  </div>
		</div>
	  );
	}

      function Sidebar({active,onNav}){
        const Btn = ({k,name,title}) => (
          <button title={title} onClick={()=>onNav(k)}
            className={"group flex h-12 w-12 items-center justify-center rounded-2xl transition " + (active===k?"bg-white/40 shadow-inner backdrop-blur":"hover:bg-white/20")}
            style={{color:BRAND.accent}}>
            <Icon name={name} />
          </button>
        );
        return (
          <aside className="sticky top-6 h-[calc(100vh-48px)]" style={{isolation:'isolate'}}>
            <div className="flex h-full flex-col items-center gap-3 rounded-3xl border border-white/25 bg-white/30 p-3 shadow-lg backdrop-blur supports-[backdrop-filter]:bg-white/20">
              <Btn k="dashboard" name="home" title="Dashboard" />
              <div className="h-[1px] w-10 bg-slate-200/50" />
              <Btn k="quote" name="file" title="Quote Tool" />
              <Btn k="plans" name="layers" title="Plans" />
              <Btn k="porting" name="phone-in" title="Porting Guide" />
              <Btn k="articles" name="book" title="Articles" />
              <Btn k="promos" name="tag" title="Promotions" />
              <Btn k="contacts" name="phone" title="Contacts" />
              <div className="mt-auto" />
              <Btn k="settings" name="settings" title="Settings" />
            </div>
          </aside>
        );
      }

      function Footer(){
        return <footer className="mt-8 text-xs text-slate-500">© {new Date().getFullYear()} WyaLink — Internal Use Only. "Insight" employee portal.</footer>;
      }

      function Dashboard({onNav}){
        return (
          <div className="relative" style={{isolation:'isolate'}}>
            <div className="relative overflow-hidden rounded-[28px]" style={{boxShadow:"0 20px 40px rgba(0,0,0,.15)"}}>
              <img src={DASHBOARD_BG} alt="Scenic" className="h-64 w-full object-cover will-change-transform" />
              <div className="absolute inset-0 bg-gradient-to-t from-white/40 via-white/10 to-transparent" />
              <div className="absolute inset-0 p-6 flex items-end">
                <div className="bg-white/80 rounded-2xl p-4 max-w-xl text-slate-8  00 shadow-xl backdrop-blur" style={{boxShadow:"0 4px 20px rgba(0,0,0,.08)", isolation:"isolate"}}>
                  <div className="text-sm uppercase tracking-wider opacity-90">Welcome to</div>
                  <div className="mt-1 text-3xl font-extrabold">Insight — WyaLink Employee Portal</div>
                  <p className="mt-2 text-sm opacity-90">Fast quoting, clear procedures, and at-a-glance references — all in one place.</p>
                </div>
              </div>
            </div>

            <div className="mt-8 mb-20 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-2">
              <QuickTile label="Quote" name="file" onClick={()=>onNav("quote")} />
              <QuickTile label="Porting" name="phone-in" onClick={()=>onNav("porting")} />
              <QuickTile label="Plans" name="layers" onClick={()=>onNav("plans")} />
              <QuickTile label="Contacts" name="phone" onClick={()=>onNav("contacts")} />
            </div>
          </div>
        );
      }

      function GlassCard({children, className=""}){
        return <div className={"rounded-2xl border border-white/40 bg-white/60 p-5 shadow-lg backdrop-blur supports-[backdrop-filter]:bg-white/35 "+className}>{children}</div>;
      }

      function QuickTile({label,name,onClick}){
        return (
          <button onClick={onClick} className="rounded-2xl border border-white/40 bg-white/60 p-6 text-center shadow-sm backdrop-blur transition hover:bg-white/70">
            <Icon name={name} size={28} />
            <div className="mt-3 font-semibold text-slate-800">{label}</div>
          </button>
        );
      }

      function QuoteTool(){
        const [customer,setCustomer] = useState("");
        const [taxRate,setTaxRate] = useLocalStorage("insight.taxRate",0);
        const [lines,setLines] = useLocalStorage("insight.quoteLines",[]);
        const [selPlan,setSelPlan] = useState(PLAN_DEFS[0].name);
        const [qty,setQty] = useState(1);
        const [note,setNote] = useState("");
        const planByName = (n)=>PLAN_DEFS.find(p=>p.name===n);
        const addLine = ()=>{
          const p = planByName(selPlan); if(!p) return;
          const q = Math.max(1, Number(qty)||1);
          setLines(prev=>[...prev, {id:crypto.randomUUID(), plan:p.name, unit:p.price, qty:q, total:p.price*q}]);
        };
        const removeLine = (id)=>setLines(prev=>prev.filter(l=>l.id!==id));
        const clearAll = ()=>setLines([]);

        const subtotal = useMemo(()=>lines.reduce((s,l)=>s+l.total,0),[lines]);
        const tax = useMemo(()=> (subtotal * (Number(taxRate)||0))/100, [subtotal,taxRate]);
        const grand = useMemo(()=> subtotal + tax, [subtotal,tax]);

        const printRef = useRef(null);
        const handlePrint = ()=>{
          const doc = window.open("","_blank","noopener,noreferrer,width=900,height=1200");
          if(!doc) return;
          const html = "<!doctype html><html><head><meta charset='utf-8'><title>Quote</title>"+
            "<script src='https://cdn.tailwindcss.com'><\\/script>"+
            "<style>@media print{.no-print{display:none}}</style></head><body class='bg-white text-slate-900'>"+
            printRef.current.innerHTML + "</body></html>";
          doc.document.write(html); doc.document.close(); doc.focus(); setTimeout(()=>doc.print(),250);
        };

        return (
          <div className="space-y-6">
            <GlassCard>
              <div className="flex flex-wrap items-end gap-3">
                <div>
                  <label className="text-xs text-slate-600">Customer</label>
                  <input className="block w-[240px] rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400" placeholder="Name / Company" value={customer} onChange={e=>setCustomer(e.target.value)} />
                </div>
                <div>
                  <label className="text-xs text-slate-600">Tax Rate (%)</label>
                  <input type="number" min="0" step="0.1" className="block w-[120px] rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400" value={taxRate} onChange={e=>setTaxRate(e.target.value)} />
                </div>
                <div className="ml-auto">
                  <button onClick={clearAll} className="rounded-xl border border-slate-300/70 bg-white/60 px-3 py-2 text-sm text-slate-700 backdrop-blur hover:bg-slate-50">Clear Lines</button>
                </div>
              </div>
            </GlassCard>

            <div className="grid grid-cols-1 gap-4 lg:grid-cols-[1fr_380px]">
              <GlassCard>
                <h3 className="text-lg font-bold" style={{color:BRAND.primary}}>Add Line</h3>
                <div className="mt-3 grid grid-cols-1 gap-3 sm:grid-cols-3">
                  <div>
                    <label className="text-xs text-slate-600">Plan</label>
                    <select className="block w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm" value={selPlan} onChange={e=>setSelPlan(e.target.value)}>
                      {PLAN_DEFS.map(p=>(<option key={p.name} value={p.name}>{p.name} — ${p.price}</option>))}
                    </select>
                  </div>
                  <div>
                    <label className="text-xs text-slate-600">Quantity</label>
                    <input type="number" min="1" className="block w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm" value={qty} onChange={e=>setQty(e.target.value)} />
                  </div>
                  <div className="flex items-end">
                    <button onClick={addLine} style={{backgroundColor:BRAND.accent}} className="w-full rounded-xl px-4 py-2 text-sm font-semibold text-white hover:opacity-90">Add to Quote</button>
                  </div>
                </div>

                <div className="mt-4 overflow-x-auto">
                  <table className="min-w-full text-sm">
                    <thead><tr className="text-left text-slate-600"><th className="py-2">Plan</th><th className="py-2">Unit</th><th className="py-2">Qty</th><th className="py-2">Line Total</th><th className="py-2"></th></tr></thead>
                    <tbody>
                      {lines.length===0 && (<tr><td colSpan="5" className="py-6 text-center text-slate-500">No items yet.</td></tr>)}
                      {lines.map(l=>(
                        <tr key={l.id} className="border-t border-slate-200/80">
                          <td className="py-2 font-medium">{l.plan}</td>
                          <td className="py-2">${l.unit.toFixed(2)}</td>
                          <td className="py-2">{l.qty}</td>
                          <td className="py-2">${l.total.toFixed(2)}</td>
                          <td className="py-2 text-right">
                            <button onClick={()=>removeLine(l.id)} className="inline-flex items-center gap-1 rounded-lg border border-slate-300/70 bg-white/60 px-2 py-1 text-xs text-slate-700 backdrop-blur hover:bg-slate-50">
                              <Icon name="trash" size={14}/> Remove
                            </button>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </GlassCard>

              <GlassCard>
                <h3 className="text-lg font-bold" style={{color:BRAND.primary}}>Totals</h3>
                <div className="mt-3 space-y-2 text-sm">
                  <div className="flex items-center justify-between"><span>Subtotal</span><span className="font-semibold">${subtotal.toFixed(2)}</span></div>
                  <div className="flex items-center justify-between"><span>Tax ({Number(taxRate)||0}%)</span><span className="font-semibold">${tax.toFixed(2)}</span></div>
                  <div className="mt-2 flex items-center justify-between border-t border-slate-200/80 pt-2 text-base font-bold"><span>Grand Total</span><span>${grand.toFixed(2)}</span></div>
                </div>
                <div className="mt-4">
                  <label className="text-xs text-slate-600">Internal Notes</label>
                  <textarea rows="4" className="mt-1 w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm" placeholder="Special considerations, install windows, etc." value={note} onChange={e=>setNote(e.target.value)} />
                </div>
                <div className="mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2">
                  <button onClick={handlePrint} style={{backgroundColor:BRAND.accent}} className="rounded-xl px-4 py-2 text-sm font-semibold text-white hover:opacity-90">Print / Save PDF</button>
                  <button onClick={()=>navigator.clipboard.writeText(JSON.stringify({customer,taxRate,lines,note},null,2))} className="rounded-xl border border-slate-300/70 bg-white/60 px-4 py-2 text-sm backdrop-blur hover:bg-slate-50">Copy JSON</button>
                </div>
              </GlassCard>
            </div>

            <div className="hidden" ref={printRef}>
              <div className="mx-auto max-w-3xl p-8">
                <div className="flex items-center justify-between">
                  <div>
                    <div className="text-xs uppercase tracking-wider text-slate-500">WyaLink</div>
                    <div className="text-2xl font-extrabold" style={{color:BRAND.primary}}>Quote</div>
                  </div>
                  <div className="text-right text-sm text-slate-600">
                    <div><span className="font-semibold">Customer:</span> {customer || "—"}</div>
                    <div><span className="font-semibold">Date:</span> {new Date().toLocaleDateString()}</div>
                  </div>
                </div>
                <table className="mt-6 w-full text-sm">
                  <thead><tr className="text-left"><th className="py-2">Plan</th><th className="py-2">Unit</th><th className="py-2">Qty</th><th className="py-2">Line Total</th></tr></thead>
                  <tbody>
                    {lines.map(l=>(
                      <tr key={l.id} className="border-t">
                        <td className="py-2 font-medium">{l.plan}</td>
                        <td className="py-2">${l.unit.toFixed(2)}</td>
                        <td className="py-2">{l.qty}</td>
                        <td className="py-2">${l.total.toFixed(2)}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
                <div className="mt-4 ml-auto w-full max-w-sm text-sm">
                  <div className="flex items-center justify-between"><span>Subtotal</span><span className="font-semibold">${subtotal.toFixed(2)}</span></div>
                  <div className="flex items-center justify-between"><span>Tax ({Number(taxRate)||0}%)</span><span className="font-semibold">${tax.toFixed(2)}</span></div>
                  <div className="mt-2 flex items-center justify-between border-t pt-2 text-base font-bold"><span>Grand Total</span><span>${grand.toFixed(2)}</span></div>
                </div>
                {note && (<div className="mt-6 rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm"><div className="font-semibold">Notes</div><div className="mt-1 whitespace-pre-wrap text-slate-700">{note}</div></div>)}
              </div>
            </div>
          </div>
        );
      }

	function Plans({query=""}){
	  const filtered = useMemo(()=>{
		if(!query) return PLAN_DEFS;
		return PLAN_DEFS.filter(p =>
		  includesQ(p.name, query) ||
		  includesQ(p.talk, query) ||
		  includesQ(p.text, query) ||
		  includesQ(p.price, query) ||
		  includesQ(p.data, query)
		);
	  },[query]);

	  return (
		<div className="grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4">
		  {filtered.length===0 && <div className="text-sm text-slate-600">No matching plans.</div>}
		  {filtered.map(p=>(
			<GlassCard key={p.name}>
			  <div className="text-[11px] uppercase tracking-wider text-slate-600">Plan</div>
			  <div className="mt-1 text-xl font-extrabold" style={{color:BRAND.primary}}>{p.name}</div>
			  <div className="mt-4 text-3xl font-extrabold">${p.price}<span className="text-sm font-normal text-slate-500">/mo</span></div>
			  <ul className="mt-3 space-y-1 text-sm">
				<li><span className="font-semibold">Talk:</span> {p.talk}</li>
				<li><span className="font-semibold">Text:</span> {p.text}</li>
				<li><span className="font-semibold">Data:</span> {p.data} GB</li>
			  </ul>
			  <div className="mt-4 rounded-xl border border-slate-200/80 bg-white/60 p-3 text-xs text-slate-600 backdrop-blur">
				Taxes/fees included.
			  </div>
			</GlassCard>
		  ))}
		</div>
	  );
	}


	function PortingGuide({query=""}){
	  const filtered = useMemo(()=>{
		if(!query) return CARRIERS;
		return CARRIERS.filter(c =>
		  includesQ(c.name, query) ||
		  includesQ(c.account, query) ||
		  includesQ(c.pin, query) ||
		  includesQ(c.support, query) ||
		  includesQ(c.tips, query)
		);
	  },[query]);

	  return (
		<div className="space-y-4">
		  {filtered.length===0 && <div className="text-sm text-slate-600">No matching carriers.</div>}
		  {filtered.map((c,i)=>(
			<GlassCard key={c.name}>
			  <details open={i===0} className="group">
				<summary className="cursor-pointer list-none">
				  <div className="flex items-center justify-between">
					<div className="text-lg font-bold" style={{color:BRAND.primary}}>{c.name}</div>
					<span className="text-slate-500 text-sm">(click to expand)</span>
				  </div>
				</summary>
				<div className="mt-3 grid gap-3 text-sm text-slate-700 sm:grid-cols-2">
				  <div><span className="font-semibold">Account #:</span> {c.account || "—"}</div>
				  <div><span className="font-semibold">PIN:</span> {c.pin || "—"}</div>
				  <div className="sm:col-span-2"><span className="font-semibold">Support:</span> {c.support || "—"}</div>
				  {c.tips && (
					<div className="sm:col-span-2 rounded-xl border border-slate-200/80 bg-white/60 p-3 text-xs text-slate-600 backdrop-blur">
					  <span className="font-semibold">Notes:</span> {c.tips}
					</div>
				  )}
				</div>
			  </details>
			</GlassCard>
		  ))}
		  <div className="rounded-2xl border border-dashed border-slate-300 p-5 text-sm text-slate-600">
			Need carrier-specific account formats or PIN rules added here? Send updates to <span className="font-semibold">ops@wyalink.com</span>.
		  </div>
		</div>
	  );
	}



	function Articles({query=""}){
	  const [articles,setArticles] = useLocalStorage("insight.articles", DEFAULT_ARTICLES);
	  const [title,setTitle] = useState(""); const [url,setUrl]=useState(""); const [tag,setTag]=useState(""); const [desc,setDesc]=useState("");
	  const add = ()=>{ if(!title||!url) return; setArticles(prev=>[{title,url,tag:tag||"General",desc:desc||""},...prev]); setTitle("");setUrl("");setTag("");setDesc(""); };
	  const remove = (idx)=>setArticles(prev=>prev.filter((_,i)=>i!==idx));

	  const filtered = useMemo(()=>{
		if(!query) return articles;
		return articles.filter(a =>
		  includesQ(a.title, query) ||
		  includesQ(a.tag, query) ||
		  includesQ(a.desc, query) ||
		  includesQ(a.url, query)
		);
	  },[articles, query]);

	  return (
		<div className="space-y-4">
		  {/* ... Add Article card unchanged ... */}
		  <div className="grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3">
			{filtered.length===0 && <div className="text-sm text-slate-600">No matching articles.</div>}
			{filtered.map((a,i)=>(
			  <GlassCard key={i}>
				<div className="text-[11px] uppercase tracking-wider text-slate-600">{a.tag||"General"}</div>
				<h4 className="mt-1 text-lg font-extrabold" style={{color:BRAND.primary}}>{a.title}</h4>
				{a.desc && <p className="mt-2 text-sm text-slate-700">{a.desc}</p>}
				<div className="mt-3 flex items-center justify-between">
				  <a href={a.url} target="_blank" rel="noreferrer" className="text-sm font-semibold text-slate-900 underline underline-offset-4">Open</a>
				  <button onClick={()=>remove(i)} className="inline-flex items-center gap-1 rounded-lg border border-slate-300/70 bg-white/60 px-2 py-1 text-xs text-slate-700 backdrop-blur hover:bg-slate-50"><Icon name="trash" size={14}/> Remove</button>
				</div>
			  </GlassCard>
			))}
		  </div>
		</div>
	  );
	}


	function Contacts({query=""}){
	  const [contacts,setContacts] = useLocalStorage("insight.contacts", DEFAULT_CONTACTS);
	  const [label,setLabel] = useState(""); const [phone,setPhone] = useState("");
	  const add = ()=>{ if(!label||!phone) return; setContacts(prev=>[{label:label.trim(), phone:phone.trim()}, ...prev]); setLabel(""); setPhone(""); };
	  const remove = (idx)=>setContacts(prev=>prev.filter((_,i)=>i!==idx));

	  const filtered = useMemo(()=>{
		if(!query) return contacts;
		return contacts.filter(c => includesQ(c.label, query) || includesQ(c.phone, query));
	  },[contacts, query]);

	  return (
		<div className="space-y-4">
		  {/* ... Add Contact card unchanged ... */}
		  <div className="grid grid-cols-1 gap-3 md:grid-cols-2 xl:grid-cols-3">
			{filtered.length===0 && <div className="text-sm text-slate-600">No matching contacts.</div>}
			{filtered.map((c,i)=>(
			  <GlassCard key={c.label+"-"+i}>
				<div className="flex items-start justify-between">
				  <div>
					<div className="text-[11px] uppercase tracking-wider text-slate-600">Contact</div>
					<div className="mt-1 text-lg font-extrabold" style={{color:BRAND.primary}}>{c.label}</div>
					<a href={`tel:${c.phone}`} className="mt-1 inline-block text-sm font-medium underline underline-offset-4">{c.phone}</a>
				  </div>
				  <button onClick={()=>remove(i)} className="inline-flex items-center gap-1 rounded-lg border border-slate-300/70 bg-white/60 px-2 py-1 text-xs text-slate-700 backdrop-blur hover:bg-slate-50"><Icon name="trash" size={14}/> Remove</button>
				</div>
			  </GlassCard>
			))}
		  </div>
		</div>
	  );
	}

	function Promotions({query=""}){
	  // Stored list of promotions
	  const [promos,setPromos] = useLocalStorage("insight.promos", [
		// Example seed
		{ title:"Fall Intro Offer", blurb:"$10 off first month on Breeze/Stream.",
		  code:"FALL10", link:"#", startsOn:"2025-10-01", endsOn:"2025-11-30",
		  active:true, weight:10 }
	  ]);

	  // Form state
	  const [title,setTitle] = useState("");
	  const [blurb,setBlurb] = useState("");
	  const [code,setCode] = useState("");
	  const [link,setLink] = useState("");
	  const [startsOn,setStartsOn] = useState("");
	  const [endsOn,setEndsOn] = useState("");
	  const [active,setActive] = useState(true);

	  const add = ()=>{
		if(!title.trim()) return;
		const p = {
		  title: title.trim(),
		  blurb: blurb.trim(),
		  code: code.trim(),
		  link: link.trim() || "#",
		  startsOn: startsOn || "",
		  endsOn: endsOn || "",
		  active,
		  weight: 0
		};
		setPromos(prev => [p, ...prev]);
		setTitle(""); setBlurb(""); setCode(""); setLink(""); setStartsOn(""); setEndsOn(""); setActive(true);
	  };

	  const remove = (idx)=> setPromos(prev => prev.filter((_,i)=>i!==idx));
	  const toggleActive = (idx)=> setPromos(prev => prev.map((p,i)=> i===idx ? {...p, active:!p.active} : p));
	  const bumpUp = (idx)=> setPromos(prev => {
		const next = [...prev];
		if(idx>0){ const t = next[idx-1]; next[idx-1]=next[idx]; next[idx]=t; }
		return next;
	  });

	  const isWithinDates = (p)=>{
		const today = new Date().setHours(0,0,0,0);
		const startOK = !p.startsOn || today >= new Date(p.startsOn).setHours(0,0,0,0);
		const endOK = !p.endsOn || today <= new Date(p.endsOn).setHours(0,0,0,0);
		return startOK && endOK;
	  };

	  const filtered = useMemo(()=>{
		let list = promos;
		// global search hook
		if(query){
		  list = list.filter(p =>
			includesQ(p.title, query) ||
			includesQ(p.blurb, query) ||
			includesQ(p.code, query) ||
			includesQ(p.link, query)
		  );
		}
		// sort by “weight” (manual priority) then by date (soonest first)
		return list.slice().sort((a,b)=>(b.weight||0)-(a.weight||0));
	  },[promos, query]);

	  return (
		<div className="space-y-4">
		  <GlassCard>
			<h3 className="text-lg font-bold" style={{color:BRAND.primary}}>Add Promotion</h3>
			<div className="mt-3 grid grid-cols-1 gap-3 md:grid-cols-2">
			  <div>
				<label className="text-xs text-slate-600">Title</label>
				<input value={title} onChange={e=>setTitle(e.target.value)} className="block w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400" placeholder="e.g., New Year Special" />
			  </div>
			  <div>
				<label className="text-xs text-slate-600">Promo Code (optional)</label>
				<input value={code} onChange={e=>setCode(e.target.value)} className="block w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm" placeholder="e.g., NY25" />
			  </div>
			  <div className="md:col-span-2">
				<label className="text-xs text-slate-600">Blurb</label>
				<input value={blurb} onChange={e=>setBlurb(e.target.value)} className="block w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm" placeholder="Short description customers will see" />
			  </div>
			  <div>
				<label className="text-xs text-slate-600">Link (optional)</label>
				<input value={link} onChange={e=>setLink(e.target.value)} className="block w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm" placeholder="https://..." />
			  </div>
			  <div className="grid grid-cols-2 gap-3">
				<div>
				  <label className="text-xs text-slate-600">Starts</label>
				  <input type="date" value={startsOn} onChange={e=>setStartsOn(e.target.value)} className="block w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm" />
				</div>
				<div>
				  <label className="text-xs text-slate-600">Ends</label>
				  <input type="date" value={endsOn} onChange={e=>setEndsOn(e.target.value)} className="block w-full rounded-xl border border-slate-300/70 bg-white/70 px-3 py-2 text-sm" />
				</div>
			  </div>
			  <div className="flex items-center gap-2">
				<input id="promoActive" type="checkbox" checked={active} onChange={e=>setActive(e.target.checked)} />
				<label htmlFor="promoActive" className="text-sm">Active</label>
			  </div>
			  <div className="md:col-span-2">
				<button onClick={add} style={{backgroundColor:BRAND.accent}} className="rounded-xl px-4 py-2 text-sm font-semibold text-white hover:opacity-90">
				  Add Promotion
				</button>
			  </div>
			</div>
		  </GlassCard>

		  <div className="grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3">
			{filtered.length===0 && <div className="text-sm text-slate-600">No promotions yet.</div>}
			{filtered.map((p,i)=>{
			  const inWindow = isWithinDates(p);
			  const live = p.active && inWindow;
			  return (
				<GlassCard key={p.title+"-"+i}>
				  <div className="flex items-start justify-between">
					<div className="flex items-center gap-2">
					  <Icon name="tag" />
					  <div>
						<div className="text-[11px] uppercase tracking-wider text-slate-600">{live ? "Active" : "Inactive"}</div>
						<h4 className="text-lg font-extrabold" style={{color:BRAND.primary}}>{p.title}</h4>
					  </div>
					</div>
					<div className="text-right text-xs text-slate-500">
					  {p.startsOn && <div>Start: {p.startsOn}</div>}
					  {p.endsOn && <div>End: {p.endsOn}</div>}
					</div>
				  </div>

				  {p.blurb && <p className="mt-2 text-sm text-slate-700">{p.blurb}</p>}
				  <div className="mt-3 flex flex-wrap items-center gap-2 text-sm">
					{p.code && <span className="rounded-lg border border-slate-300/70 bg-white/60 px-2 py-1 font-semibold">Code: {p.code}</span>}
					{p.link && p.link!=="#" && <a target="_blank" rel="noreferrer" href={p.link} className="rounded-lg border border-slate-300/70 bg-white/60 px-2 py-1 underline underline-offset-4">Open Link</a>}
					{!inWindow && <span className="rounded-lg border border-amber-200 bg-amber-50 px-2 py-1 text-amber-700">Out of date range</span>}
				  </div>

				  <div className="mt-4 flex items-center justify-between">
					<div className="flex gap-2">
					  <button onClick={()=>toggleActive(i)} className="rounded-lg border border-slate-300/70 bg-white/60 px-2 py-1 text-xs backdrop-blur hover:bg-slate-50">{p.active?"Disable":"Enable"}</button>
					  <button onClick={()=>bumpUp(i)} className="rounded-lg border border-slate-300/70 bg-white/60 px-2 py-1 text-xs backdrop-blur hover:bg-slate-50">Move Up</button>
					</div>
					<button onClick={()=>remove(i)} className="inline-flex items-center gap-1 rounded-lg border border-slate-300/70 bg-white/60 px-2 py-1 text-xs text-slate-700 backdrop-blur hover:bg-slate-50">
					  <Icon name="trash" size={14}/> Remove
					</button>
				  </div>
				</GlassCard>
			  );
			})}
		  </div>
		</div>
	  );
	}

      function SettingsPanel(){
        const [articles] = useLocalStorage("insight.articles", DEFAULT_ARTICLES);
        const [contacts] = useLocalStorage("insight.contacts", DEFAULT_CONTACTS);
        const [taxRate] = useLocalStorage("insight.taxRate", 0);
        const [quoteLines] = useLocalStorage("insight.quoteLines", []);
        const exportAll = ()=>{
          const payload = { brand:BRAND, articles, contacts, taxRate, quoteLines, exportedAt:new Date().toISOString() };
          const blob = new Blob([JSON.stringify(payload,null,2)], {type:"application/json"});
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a"); a.href = url; a.download = `insight-settings-${new Date().toISOString().slice(0,10)}.json`; a.click(); URL.revokeObjectURL(url);
        };
        const importAll = (evt)=>{
          const f = evt.target.files?.[0]; if(!f) return;
          const r = new FileReader();
          r.onload = ()=>{
            try{
              const data = JSON.parse(r.result);
              if(Array.isArray(data.articles)) localStorage.setItem("insight.articles", JSON.stringify(data.articles));
              if(Array.isArray(data.contacts)) localStorage.setItem("insight.contacts", JSON.stringify(data.contacts));
              if(typeof data.taxRate!=="undefined") localStorage.setItem("insight.taxRate", JSON.stringify(data.taxRate));
              if(Array.isArray(data.quoteLines)) localStorage.setItem("insight.quoteLines", JSON.stringify(data.quoteLines));
              alert("Imported! Refresh to see changes.");
            }catch(e){ alert("Invalid JSON export."); }
          };
          r.readAsText(f);
        };
        const clearAll = ()=>{
          ["insight.articles","insight.contacts","insight.taxRate","insight.quoteLines"].forEach(k=>localStorage.removeItem(k));
          alert("Cleared local settings. Refresh to see defaults.");
        };
        return (
          <div className="space-y-4">
            <GlassCard>
              <h3 className="text-lg font-bold" style={{color:BRAND.primary}}>Data & Preferences</h3>
              <p className="mt-2 text-sm text-slate-700">Manage stored lists and preferences. Data is saved in your browser only (localStorage).</p>
              <div className="mt-4 flex flex-wrap items-center gap-3">
                <button onClick={exportAll} className="inline-flex items-center gap-2 rounded-xl border border-slate-300/70 bg-white/60 px-4 py-2 text-sm backdrop-blur hover:bg-slate-50"><Icon name="download" size={16}/> Export JSON</button>
                <label className="inline-flex cursor-pointer items-center gap-2 rounded-xl border border-slate-300/70 bg-white/60 px-4 py-2 text-sm backdrop-blur hover:bg-slate-50">
                  <Icon name="upload" size={16}/> Import JSON
                  <input type="file" accept="application/json" className="hidden" onChange={importAll}/>
                </label>
                <button onClick={clearAll} className="inline-flex items-center gap-2 rounded-xl border border-red-200 bg-white/60 px-4 py-2 text-sm text-red-700 hover:bg-red-50"><Icon name="trash" size={16}/> Clear Local Data</button>
              </div>
            </GlassCard>
            <GlassCard>
              <h4 className="text-base font-semibold" style={{color:BRAND.primary}}>Visual Notes</h4>
              <ul className="mt-2 list-disc pl-5 text-sm text-slate-700">
                <li>Flat, teal-accent icons (inline SVG). No glows.</li>
                <li>White background for readability. Glass cards use subtle backdrop-blur.</li>
                <li>Using <code>Babel Standalone</code> here so JSX works in a single file.</li>
              </ul>
            </GlassCard>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
    </script>
  </body>
</html>
